<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dark Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div class="page">
        <aside class="aside-navbar">
            <ol class="menu-container">
                <li class="menu--item menu--heading">
                    <h3>Menu</h3>
                    <span class="settings-icon">
                        <a href="#">
                            <i class="fa fa-cog"></i>
                        </a>
                    </span>
                </li>
                <li class="menu--item">
                    <a href="#">Overview</a>
                </li>
                <li class="menu--item">
                    <a href="#">Sales</a>
                </li>
                <li class="menu--item">
                    <a href="#">Your Staff</a>
                </li>
                <li class="menu--item">
                    <a href="#">Analytics & Targetting</a>
                </li>
                <li class="menu--item">
                    <a href="#">What's New</a>
                </li>
            </ol>

            <hr>

            <ol class="menu-container">
                <li class="menu--item menu--heading">
                    <h3>Dashboard</h3>
                    <span class="settings-icon">
                        <a href="#">
                            <i class="fa fa-cog"></i>
                        </a>
                    </span>
                </li>
                <li class="menu--item">
                    <a href="#">Messages</a>
                </li>
                <li class="menu--item">
                    <a href="#">Connections</a>
                </li>
                <li class="menu--item">
                    <a href="#">Integrations</a>
                </li>
                <li class="menu--item">
                    <a href="#">Account Settings</a>
                </li>
                <li class="menu--item">
                    <a href="#">App Settings</a>
                </li>
            </ol>
        </aside>

        <div class="page-content">
            <nav class="page-content-navbar block">
                <div class="search-box">
                    <input id="search" type="text" placeholder="Search">
                    <label for="search" class="search-icon">
                        <i class="fa fa-search"></i>
                    </label>
                </div>

                <div class="nav-items">
                    <a href="#" class="nav-item">Accounting</a>
                    <a href="#" class="nav-item">
                        Activity
                        <span class="counter">2</span>
                    </a>
                    <a href="#" class="nav-item">Teams</a>
                </div>

                <div class="profile-sidebar">
                    <a href="#">
                        <h4>Lozano</h4>
                        <div class="rounded-pic"></div>
                        <span class="bottom-icon">
                            <i class="fa fa-angle-down"></i>
                        </span>
                    </a>
                </div>
            </nav>
            <main class="main-content">
                <section class="block">
                    <header class="section-header block">
                        <h2>Models</h2>
                        <div class="control-buttons">
                            <button class="btn btn--primary">
                                <span class="fa fa-chevron-left"></span>
                            </button>
                            <button class="btn btn--primary">
                                <span class="fa fa-chevron-right"></span>
                            </button>
                        </div>
                    </header>
                    <div class="carrousel" id="models-carrousel">

                    </div>
                </section>
                <section class="block">
                    <div class="block">
                        <h2>Profile Views</h2>
                    </div>
                    <ul class="profile-views" id="profile-views">

                    </ul>
                </section>
                <section class="block">
                    <h2>Featured Models</h2>
                </section>
            </main>
        </div>
    </div>

    <template id="carrousel-item-template">
        <div class="carrousel-item">
            <div class="picture">
                <a href="#" class="img" style="background-image: url('{{url}}')"></a>
            </div>
            <div class="info">
                <a href="#" class="link">
                    <h3>{{name}}</h3>
                </a>
                <span>{{description}}</span>
            </div>
        </div>
    </template>

    <template id="profile-view-template">
        <li class="profile-view">
            <a class="view">
                <div class="profile-data">
                    <div class="profile-picture"></div>
                    <div class="data">
                        <h4 class="name">{{name}}</h4>
                        <span class="last-time">{{time}}</span>
                    </div>
                </div>
                <div class="date">
                    {{date}}
                </div>
            </a>
        </li>
    </template>

    <script>
        (function () {
            var browserSupportsTemplate = 'content' in document.createElement('template');
            var msg = 'Browser does not support <template> tag';
            if (!browserSupportsTemplate) throw new Error(msg);

            function createTemplate(selector) {
                var template = document.querySelector(selector);

                var Template = function (data) {
                    this._data = data || {};
                    this._template = template;
                    this.element = this._parse();
                };

                Template.prototype._parse = function () {
                    var html = this._template.innerHTML;
                    var curlyBracesRegExp = /{{\s*([\w\.]+)\s*}}/g;
                    var data = this._data;
                    var parsed = html.replace(curlyBracesRegExp, function (_, key) {
                        var value;

                        if (/\./g.test(key)) {
                            var keys = str.split('.');
                            value = keys.reduce(function (obj, strkey) {
                                if (typeof obj === 'string' && !obj.trim()) return '';
                                return obj[strkey] || '';
                            }, data);
                        } else value = data[key] || '';

                        return value;
                    });

                    var container = document.createElement('div');
                    container.innerHTML = parsed.trim();
                    var fragment = document.createDocumentFragment();
                    container.childNodes.forEach(function (node) {
                        fragment.appendChild(node);
                    });
                    console.log(fragment);
                    return fragment;
                };

                Template.prototype.appendTo = function (element) {
                    var parent;
                    if (typeof element === 'string') parent = document.querySelector(element);
                    else parent = element;
                    parent.appendChild(this.element);
                }

                Object.defineProperty(Template.prototype, 'data', {
                    set: function (data) {
                        this._data = data;
                        this.element = this._parse();
                    },
                    get: function () {
                        return this._data;
                    }
                });

                return Template;
            }

            var CarrouselItem = createTemplate('#carrousel-item-template');
            var models = [
                {
                    url: '',
                    name: 'Josie Fox',
                    description: 'Russian Model'
                },
                {
                    url: '',
                    name: 'Ella Ramos',
                    description: 'Spanish Model'
                },
                {
                    url: '',
                    name: 'Bernice Butler',
                    description: 'Italian Model'
                },
                {
                    url: '',
                    name: 'Millie Tyler',
                    description: 'Brazilian Model'
                },
                {
                    url: '',
                    name: 'Vera Jefferson',
                    description: 'Canadian Model'
                }
            ];

            var container = document.querySelector('#models-carrousel');
            models.forEach(function (model) {
                var item = new CarrouselItem(model);
                item.appendTo(container);
            });

            var ProfileView = createTemplate('#profile-view-template');
            var profileViews = [
                {
                    name: 'Stella Martin',
                    time: '34 min ago',
                    date: '25 Sep 2018'
                },
                {
                    name: 'Mamie Klein',
                    time: '29 min ago',
                    date: '25 Aug 2018'
                },
                {
                    name: 'Nellie Carroll',
                    time: '2 hours ago',
                    date: '13 Oct 2018'
                },
                {
                    name: 'Polly Watson',
                    time: '4 hours ago',
                    date: '26 Feb 2018'
                },
                {
                    name: 'Mamie Klein',
                    time: '7 hours ago',
                    date: '31 Dic 2017'
                }
            ];

            container = document.querySelector('#profile-views');
            profileViews.forEach(function (view) {
                var profileView = new ProfileView(view);
                profileView.appendTo(container);
            })
        })();
    </script>
</body>

</html>
